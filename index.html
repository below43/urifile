<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>URL File - share files embedded within URLs</title>
	<link rel="stylesheet" href="style.css">
	<link rel="manifest" href="manifest.json">
	<link rel="icon" href="icon.png" type="image/png">
</head>

<body>
	<div id="loading"></div>
	<div class="container">
		<h1>URL File</h1>
		<p class="introtext">Share URLs containing Base64-encoded files.<br />Fully client-side. Your files are not stored on any server.</p>
		<div id="create-payload">
			<input type="file" id="fileInput" onchange="convertFile()">
			<p><em>Note: this works best with small files</em></p>
		</div>
		<div id="payload-error" class="note">
			<b>Error: Unable to load file</b><br /><br />
			This normally occurs with larger files, when the browser truncates the query string. You may want to paste the URL + payload instead.<br /><br />
			<button onclick="pastePayload(event)" class="button-solid">Paste the URL + Payload</button>
		</div>
		<div id="display-payload">
			<div class="file-info">
				<p><b>Filename</b><span id="filename"></span></p>
				<p><b>File size</b><span id="fileSize"></span></p>
				<p><b>MIME type</b><span id="fileMimeType"></span></p>
				<p><b>Date &amp; time</b><span id="uploadDate"></span></p>
				<div id="filePreview"></div>
				<p id="fileContent"></p>
			</div>
			<div class="link-preview">
				<button onclick="share()" id="share" class="button-solid">Copy URL + Payload</button>
				<!-- <br /><br />
				<a href="#" onclick="copyPayload(event)" class="small-link">Copy payload</a> -->
			</div>
			</p>
			<p id="size-warning" class="note">
				<b>Warning:</b> The file is large, so some browsers may end up truncating the query string. You may need to paste the URL + payload at the other end to retrieve the file.
			</p>

		</div>
		<div id="toast"></div>
		<footer>
			<div class="footer-links">
				<a href="#" onclick="reset(event)" class="small-link">Share a file</a>
				<a href="#" onclick="pastePayload(event)" class="small-link">Paste URL + Payload</a>
				<a href="#about" onclick="showModal(event, 'about')" class="small-link">About</a>
				<a href="#terms" onclick="showModal(event, 'terms')">Terms & privacy</a>
			</div>
			<p style="margin-top: 20px; font-size: 12px;">made by <a href="https://andrew.drake.nz" style="color: #666;">andrew.drake.nz</a></p>
		</footer>
	</div>

    <script src="script.js"></script>

	<div id="terms" class="modal" onclick="handleModalClick(event, 'terms')">
		<div class="modal-content">
			<h3>Terms of Service</h3>
			<div class="modal-body">
				<p>This service is provided "as is" without any warranties, express or implied. Use of this service is at your own risk. The service provider does not guarantee the availability, accuracy, or functionality of the service.</p>
				<p>Users must not use this service for any illegal or unauthorized purposes.</p>
			</div>
			<h3>Privacy Policy</h3>
			<div class="modal-body">
				<p>We respect your privacy. None of your data is stored or tracked. No files are saved on a server. Cloudflare Web Analytics record privacy-first anonymous usage data.</p>
			</div>
			<div class="modal-buttons">
				<button onclick="closeModal('terms')" class="button-outline">Close</button>
			</div>
		</div>
	</div>

	<div id="about" class="modal" onclick="handleModalClick(event, 'about')">
		<div class="modal-content">
			<h2>About</h2>
			<div class="modal-body">
				<p>I use multiple machines with a shared keyboard and mouse (I use <a href="https://github.com/input-leap/input-leap" nofollow="nofollow" target="_blank">InputLeap</a>). I created this tool so that I could easily transfer files from one machine to another using a shared clipboard. This works equally well pasting into a chat or an email, but may meet varying degrees of success depending on the transport mechanism.</p>
				<p>To an extent, this is an academic exercise: to show that a file can be transported via a URL. However, I do find it jolly useful for small file transfers. Coupled with Edge's QR code generator, it's fairly handy for getting a small file onto a mobile.</p>
				<p>Because the payload is transported via the # fragment, theoretically the payload is only loaded local to the client, and not sent to the server.</p>
				<p>Suffice to say, this is completely useless for larger files, though it's fun to see what each brower's limit is...</p>
				<p>Made with a bit of help from GitHub Copilot.</p>
				<p>&copy; <a href="https://andrew.drake.nz" style="text-decoration: none;">Andrew Drake</a>  2025</p>
			</div>
			<div class="modal-buttons">
				<button onclick="closeModal('about')" class="button-outline">Close</button>
			</div>
		</div>
	</div>
</body>

</html>